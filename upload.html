<!DOCTYPE html>
<html>
<head>
    <title>File Upload Form</title>
</head>
<body>
    <h1>Upload a File</h1>

    <!-- The form for uploading files -->
    <form action="" id="upload-form" method="post" enctype="multipart/form-data">
        <!-- File input field -->
        <input type="file" name="file">
        <!-- Submit button to initiate the upload -->
        <input type="submit" value="Upload">
    </form>

    <!-- Container for displaying upload status messages -->
    <div id="upload-status"></div>

    <!-- JavaScript code for handling the form submission via AJAX -->
    <script>
        // Add a submit event listener to the upload form
        document.getElementById('upload-form').addEventListener('submit', (e) => {
            e.preventDefault(); // Prevent the default form submission behavior

            const formData = new FormData(e.target); // Create a FormData object to store form data
            const uploadStatus = document.getElementById('upload-status'); // Container for upload status messages

            // Clear any previous status messages
            uploadStatus.innerHTML = '';

            // Send a POST request to the '/upload' endpoint with the form data
            fetch('/upload', {
                method: 'POST',
                body: formData, // Include the form data in the request body
            })
            .then(response => response.text()) // Parse the response as text
            .then(data => {
                // Display the upload status message on the page
                uploadStatus.textContent = data;
                console.log('File uploaded:', data);
            })
            .catch(error => {
                // Display an error message if the upload fails
                uploadStatus.textContent = 'Error uploading file.';
                console.error('Error uploading file:', error);
            });
        });
    </script>
</body>
</html>
